; A FAT file system volume is composed of four basic regions, which are laid out in this order on the volume:
; 0 - Reserved Region
; 1 - FAT Region
; 2 - Root Directory Region (doesn't exist on FAT32 volumes)
; 3 - File and Directory Data Region

; Boot Sector & BIOS Parameter Block
; usage: BS_BPB boot_code_label
;        boot_code_label: db
%macro BS_BPB 1
BS_jmpBoot:
    jmp short %1                                ; 0xEB cb
    nop                                         ; 0x90
BS_OEMName:
    db 'MSWIN4.1'

BPB_BytsPerSec:
    dw 512
BPB_SecPerClus:
    db 1
BPB_RsvdSecCnt:
    dw 32
BPB_NumFATs:
    db 2
BPB_RootEntCnt:
    dw 0
BPB_TotSec16:
    dw 0
BPB_Media:
    db 0xf0                                     ; removable media
BPB_FATSz16:
    dw 0
BPB_SecPerTrk:
    dw 17                                       ; should use int 0x13 ah=0x08 to get
BPB_NumHeads:
    dw 4                                        ; should use int 0x13 ah=0x08 to get
BPB_HiddSec:
    dd 0                                        ; This field is generally only relevant for media visible on interrupt 0x13
                                                ; This field should always be zero on media that are not partitioned
                                                ; Exactly what value is appropriate is operating system specific
BPB_TotSec32:
    dd 8160                                     ; means disk size is 4M
BPB_FATSz32:
    dd 8                                        ; sectors per FAT
BPB_ExtFlags:
    dw 00000000_0_000_0000B                     ; mirroring is abled
BPB_FSVer:
    dw 0
BPB_RootClus:
    dd 2                                        ; cluster number of the first cluster of the root directory
BPB_FSInfo:
    dw 1                                        ; sector number of FSINFO structure in the reserved area of the FAT32 volume
BPB_BkBootSec:
    dw 6
BPB_Reserved:
    times 12 db 0

BS_DrvNum:
    db 0x80                                     ; int 0x13 drive number, 0x80 for hard disk
BS_Reserved1:
    db 0
BS_BootSig:
    db 0x29                                     ; indicate that the following three fields in the boot sector are present
BS_VolID:
    dd 0                                        ; This ID is usually generated by simply combining the current date and time into a 32-bit value
BS_VolLab:
    db 'MyOS - zjm '
BS_FilSysType:
    db 'FAT32   '
%endmacro ; 共 8 字节

